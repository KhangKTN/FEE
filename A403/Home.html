<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../lib/bootstrap.min.css" >
    <script src="../lib/jquery-3.7.1.min.js"></script>
    <script src="../lib/bootstrap.bundle.min.js"></script>
    <title>Document</title>
</head>
<style>
    small{
        color: red;
    }
</style>
<body>
    <img style="width: 100%; height: 400px; object-fit: cover;" src="https://langgoco.com/wp-content/uploads/2020/06/IMG-9967.jpg" alt="">
    <div class="container-fluid">
        <h3 class="text-success mt-3">Visitor information</h3>
        <div class="col-6 mx-auto">
            <form action="Search.html" method="get">
                <div class="form-inline mt-4">
                    <label for="firstName" class="col-3 text-right">First name:</label>
                    <input type="text" name="firstName" id="firstName" class="form-control col-9" placeholder="" aria-describedby="helpId">
                    <small class="col-12 text-right mt-2"></small>
                </div>
                <div class="form-inline mt-4">
                    <label for="lastName" class="col-3">Last name:</label>
                    <input type="text" name="lastName" id="lastName" class="form-control col-9" placeholder="" aria-describedby="helpId">
                    <small class="col-12 text-right mt-2"></small>
                </div>
                <div class="form-inline mt-4">
                    <label class="col-3 text-right" for="gender">Gender:</label>
                    <select class="form-control col-9" name="gender" id="gender">
                        <option value="male">Male</option>
                        <option value="female">Female</option>
                    </select>
                </div>
                <div class="form-inline mt-4">
                    <label for="email" class="col-3">Email:</label>
                    <input type="email" class="form-control col-9" name="email" id="email" aria-describedby="emailHelpId" placeholder="">
                    <small class="col-12 text-right mt-2"></small>
                </div>
                <div>
                    <label class="col-3">You are in:</label>
                    <div class="form-check form-check-inline">
                        <label class="form-check-label">
                        <input type="radio" class="form-check-input" name="youAreIn" id="europe" value="europe" checked>
                        Europe
                    </div>
                    <div class="form-check form-check-inline">
                        <label class="form-check-label">
                        <input type="radio" class="form-check-input" name="youAreIn" id="afica" value="afica">
                            Afica
                    </div>
                    <div class="form-check form-check-inline">
                        <label class="form-check-label">
                            <input type="radio" class="form-check-input" name="youAreIn" id="australia" value="australia">
                            Australia
                    </div>
                    <div class="form-check form-check-inline">
                        <label class="form-check-label">
                            <input type="radio" class="form-check-input" name="youAreIn" id="asia" value="asia">
                            Asia
                    </div>
                    <div class="form-check form-check-inline">
                        <label class="form-check-label">
                            <input type="radio" class="form-check-input" name="youAreIn" id="america" value="america">
                            America
                    </div>
                </div>
                <div class="form-inline mt-4">
                    <label class="col-3" for="">What are your hobbies:</label>
                    <div class="col-9 form-inline">
                        <div class="form-check form-check-inline">
                            <label class="form-check-label">
                                <input type="checkbox" class="form-check-input" name="hobbie" id="" value="swimming">
                                Swimming
                            </label>
                        </div>
                        <div class="form-check form-check-inline">
                            <label class="form-check-label">
                                <input type="checkbox" class="form-check-input" name="hobbie" id="" value="cooking">
                                Cooking
                            </label>
                        </div>
                        <div class="form-check form-check-inline">
                            <label class="form-check-label">
                                <input type="checkbox" class="form-check-input" name="hobbie" id="" value="shopping">
                                Shopping
                            </label>
                        </div>
                        <div class="form-check form-check-inline">
                            <label class="form-check-label">
                                <input type="checkbox" class="form-check-input" name="hobbie" id="" value="sport">
                                Sport
                            </label>
                        </div>
                        <div class="form-check form-check-inline">
                            <label class="form-check-label">
                                <input type="checkbox" class="form-check-input" name="hobbie" id="" value="dance">
                                Dance
                            </label>
                        </div>
                        <div class="form-check form-check-inline">
                            <label class="form-check-label">
                                <input type="checkbox" class="form-check-input" name="hobbie" id="" value="sing">
                                Sing
                            </label>
                        </div>
                    </div>
                </div>
                <div class="form-inline mt-4">
                    <label for="description" class="col-3">Description</label>
                    <textarea class="form-control col-9" name="des" id="description" rows="3"></textarea>
                    <small class="col-12 text-right mt-2"></small>
                </div>
                <button id="btn_submit" type="submit" class="mt-5 btn btn-primary btn-lg btn-block w-25 mx-auto">Register</button>
                <!-- <input type="submit" value="Submit" /> -->
            </form>
        </div>
    </div>
</body>
<script>
    const isLetter = (input) => {
        return /^[A-Za-z]*$/.test(input)
    }

    const isNumber = (input) => {
        return /^[0-9]+$/.test(input)
    }

    const isEmail = (input) => {
        return /^[a-zA-Z0-9]*\@[a-zA-Z0-9]*$/.test(input)
    }

    const fieldNotBlank = ['firstName', 'lastName']

    const validateForm = () => {
        $('input[type="text"], input[type="email"], textarea').each(function(){
            const inputValue = $(this).val().trim()
            const inputId = $(this).attr('id')

            $(this).next().text('')
            
            if(!inputValue && fieldNotBlank.includes(inputId)){
                $(this).next().text('This field is required!')
            }
            else if(fieldNotBlank.includes(inputId)){
                if(inputValue.length > 20) $(this).next().text('Max length of character is 20!')
                else if(!isLetter(inputValue)) $(this).next().text('This field is allow text!')
            }
            else if('email' === inputId && inputValue && !isEmail(inputValue)){
                $(this).next().text('Email is not in correct format.!')
            }
            else if('description' === inputId && inputValue && inputValue.length > 200){
                $(this).next().text('Max length of character is 200!')
            }
        })
    }

    $('form').submit(function(e){
        e.preventDefault()
        // validateForm()

        const data = $(this).serializeArray()
        let searchString = '?'

        data.forEach(({name, value}, index, arr) => {
            if(name === 'hobbie') return
            searchString += `${name}=${value}`
            if(index !== arr.length - 1) searchString += '&'
        })

        let youIn
        $('input[type="radio"]').each(function(){
            if($(this).prop('checked')) youIn = $(this).val()
        })

        let hobbies = []
        $('input[name="hobbie"]').each(function(){
            if($(this).prop('checked')) hobbies.push($(this).val())
        })

        console.log($('select option:selected').text());

        if(hobbies.length > 0) searchString += `&hobbie=${hobbies.join(';')}`

        // window.location.href = `http://127.0.0.1:3000/A403/Search.html${searchString}`
    })
</script>
</html>